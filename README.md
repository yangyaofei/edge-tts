# Edge TTS (Browser Extension & Server)

[English](#english) | [ä¸­æ–‡](#chinese)

---

<a name="english"></a>
# Edge TTS

A powerful Text-to-Speech solution using Microsoft Edge's online TTS engine. It consists of a **Python Backend** (FastAPI) and a **Chrome Extension** (Vue 3).

## Features

- ğŸš€ **High Quality**: Uses Microsoft Edge's natural sounding Neural voices.
- âš¡ **Streaming**: Low latency audio streaming.
- ğŸ§© **Smart Chunking**: Automatically splits long articles into paragraphs.
- ğŸ” **Preloading**: Automatically fetches the next paragraph for smooth playback.
- â¯ï¸ **Controls**: Play, Pause, Resume, Stop, Click-to-play, Retry failed chunks.
- âš™ï¸ **Customizable**: Adjust speed (-50% to +50%) and switch voices.
- ğŸ”’ **Secure**: JWT authentication with localhost bypass and persistent secret keys.

## Authentication & Security

- **Localhost Bypass**: If you are running both the backend and the extension on the same machine (`127.0.0.1`), you **do not need a JWT token**.
- **Remote Usage**: If the backend is on a different server, you must provide the JWT token generated by the server.
- **Persistence**: The server automatically generates a `SECRET_KEY` and saves it to a `.env` file on the first run. This ensures that your JWT tokens remain valid even after server restarts.

## Installation Methods

### Method 1: Docker (Recommended)
1.  **Start Backend:**
    ```bash
    docker-compose up -d
    ```
2.  **Get Token:**
    View logs to find the **Admin Token**:
    ```bash
    docker logs edge-tts-backend
    ```

### Method 2: Python Direct Run
1.  **Install Dependencies:**
    ```bash
    cd backend
    pip install -r requirements.txt
    ```
2.  **Start Server:**
    ```bash
    uvicorn app.main:app --host 0.0.0.0 --port 8000
    ```
3.  **Get Token:**
    Copy the **Admin Token** printed in the terminal.

---

## Extension Setup

1.  **Download/Build Extension:**
    *   **Users:** Download `edge-tts-extension.zip` from [Releases](../../releases) and unzip it.
    *   **Developers:** Run `npm install && npm run build` in the `extension` folder.
2.  **Load into Chrome:**
    1.  Go to `chrome://extensions/`.
    2.  Enable **Developer mode** (top right).
    3.  Click **Load unpacked** and select the `dist` folder (or unzipped folder).

## How to Use

1.  **Open Panel**: Click the extension icon to open the Side Panel.
2.  **Configure (If needed)**:
    *   Click the **Settings (âš™ï¸)** button.
    *   Set **Backend URL** (default is `http://localhost:8000`).
    *   Paste the **JWT Token** (only required if not using `localhost`).
    *   Click **"Refresh Voice List"**.
3.  **Start Reading**:
    *   Open any web page and click **"Read Page"**.
    *   *Tip: Select specific text on the page to read only that part.*

---

<a name="chinese"></a>
# Edge TTS (æµè§ˆå™¨æ’ä»¶ä¸æœåŠ¡ç«¯)

ä¸€ä¸ªåŸºäºå¾®è½¯ Edge åœ¨çº¿è¯­éŸ³å¼•æ“çš„å¼ºå¤§æ–‡æœ¬è½¬è¯­éŸ³è§£å†³æ–¹æ¡ˆã€‚åŒ…å«ä¸€ä¸ª **Python åç«¯** (FastAPI) å’Œä¸€ä¸ª **Chrome æ’ä»¶** (Vue 3)ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **é«˜è´¨é‡è¯­éŸ³**: ä½¿ç”¨å¾®è½¯ Edge çš„è‡ªç„¶ç¥ç»ç½‘ç»œè¯­éŸ³ (å¦‚ `zh-CN-XiaoxiaoNeural`)ã€‚
- âš¡ **æµå¼ä¼ è¾“**: æä½å»¶è¿Ÿçš„éŸ³é¢‘æµå¼æ’­æ”¾ã€‚
- ğŸ§© **æ™ºèƒ½åˆ†å—**: è‡ªåŠ¨å°†é•¿æ–‡ç« åˆ‡åˆ†ä¸ºæ®µè½ï¼Œæ”¯æŒé€æ®µæ’­æ”¾ã€‚
- ğŸ” **è‡ªåŠ¨é¢„åŠ è½½**: æ’­æ”¾å½“å‰æ®µè½æ—¶è‡ªåŠ¨ä¸‹è½½ä¸‹ä¸€æ®µï¼Œå®ç°æ— ç¼è¡”æ¥ã€‚
- â¯ï¸ **æ’­æ”¾æ§åˆ¶**: æ”¯æŒ æ’­æ”¾ã€æš‚åœã€æ¢å¤ã€åœæ­¢ï¼Œç‚¹å‡»è·³è½¬ï¼Œå¤±è´¥é‡è¯•ã€‚
- âš™ï¸ **ä¸ªæ€§åŒ–è®¾ç½®**: æ”¯æŒè¯­é€Ÿè°ƒèŠ‚ (-50% åˆ° +50%) å’Œè¯­éŸ³åˆ‡æ¢ã€‚
- ğŸ”’ **å®‰å…¨ä¿æŠ¤**: å†…ç½® JWT é‰´æƒæœºåˆ¶ï¼Œæ”¯æŒæœ¬åœ°å›ç¯å…å¯†è®¿é—®åŠå¯†é’¥æŒä¹…åŒ–ã€‚

## è®¤è¯ä¸å®‰å…¨è¯´æ˜

- **æœ¬åœ°å…å¯†**: å¦‚æœæ‚¨çš„åç«¯å’Œæ’ä»¶è¿è¡Œåœ¨åŒä¸€å°æœºå™¨ä¸Šï¼ˆå³é€šè¿‡ `127.0.0.1` è®¿é—®ï¼‰ï¼Œæ‚¨ **æ— éœ€è®¾ç½® JWT Token** å³å¯ç›´æ¥ä½¿ç”¨ã€‚
- **è¿œç¨‹è®¿é—®**: å¦‚æœåç«¯éƒ¨ç½²åœ¨è¿œç¨‹æœåŠ¡å™¨ï¼Œå¿…é¡»åœ¨æ’ä»¶è®¾ç½®ä¸­å¡«å…¥æœåŠ¡å™¨ç”Ÿæˆçš„ JWT Tokenã€‚
- **æŒä¹…åŒ–**: åç«¯åœ¨é¦–æ¬¡è¿è¡Œæ—¶ä¼šéšæœºç”Ÿæˆ `SECRET_KEY` å¹¶ä¿å­˜è‡³ `.env` æ–‡ä»¶ä¸­ã€‚è¿™æ„å‘³ç€å³ä¾¿é‡å¯æœåŠ¡å™¨ï¼Œä¹‹å‰ç”Ÿæˆçš„ Token ä¾ç„¶æœ‰æ•ˆã€‚

## å®‰è£…æ–¹å¼

### æ–¹æ³•ä¸€ï¼šDocker éƒ¨ç½² (æ¨è)
1.  **å¯åŠ¨åç«¯:**
    ```bash
    docker-compose up -d
    ```
2.  **è·å– Token:**
    æŸ¥çœ‹å®¹å™¨æ—¥å¿—ä»¥è·å– **Admin Token**:
    ```bash
    docker logs edge-tts-backend
    ```

### æ–¹æ³•äºŒï¼šPython ç›´æ¥è¿è¡Œ
1.  **å®‰è£…ä¾èµ–:**
    ```bash
    cd backend
    pip install -r requirements.txt
    ```
2.  **å¯åŠ¨æœåŠ¡:**
    ```bash
    uvicorn app.main:app --host 0.0.0.0 --port 8000
    ```
3.  **è·å– Token:**
    å¤åˆ¶ç»ˆç«¯ä¸­æ‰“å°å‡ºæ¥çš„ **Admin Token**ã€‚

---

## æ’ä»¶å®‰è£…ä¸é…ç½®

1.  **å‡†å¤‡æ’ä»¶åŒ…:**
    *   **æ™®é€šç”¨æˆ·:** ä» [Releases](../../releases) é¡µé¢ä¸‹è½½ `edge-tts-extension.zip` å¹¶è§£å‹ã€‚
    *   **å¼€å‘è€…:** åœ¨ `extension` ç›®å½•ä¸‹è¿è¡Œ `npm install && npm run build`ã€‚
2.  **åŠ è½½åˆ° Chrome:**
    1.  æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè®¿é—® `chrome://extensions/`ã€‚
    2.  å¼€å¯å³ä¸Šè§’çš„ **å¼€å‘è€…æ¨¡å¼ (Developer mode)**ã€‚
    3.  ç‚¹å‡» **åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº (Load unpacked)**ï¼Œé€‰æ‹© `dist` æ–‡ä»¶å¤¹ï¼ˆæˆ–è§£å‹åçš„æ–‡ä»¶å¤¹ï¼‰ã€‚

## ä½¿ç”¨è¯´æ˜

1.  **æ‰“å¼€é¢æ¿**: ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ’ä»¶å›¾æ ‡æ‰“å¼€ä¾§è¾¹æ ã€‚
2.  **é…ç½® (å¯é€‰)**:
    *   ç‚¹å‡»å³ä¸Šè§’çš„ **è®¾ç½® (âš™ï¸)** æŒ‰é’®ã€‚
    *   è®¾ç½® **Backend URL** (é»˜è®¤ä¸º `http://localhost:8000`)ã€‚
    *   ç²˜è´´ **JWT Token** (ä»…å½“éæœ¬åœ°è®¿é—®æ—¶éœ€è¦)ã€‚
    *   ç‚¹å‡» **"Refresh Voice List"** åŒæ­¥è¯­éŸ³åˆ—è¡¨ã€‚
3.  **å¼€å§‹æœ—è¯»**:
    *   æ‰“å¼€ä»»æ„ç½‘é¡µï¼Œç‚¹å‡» **"Read Page"** å¼€å§‹æœ—è¯»ã€‚
    *   *æç¤º: å¦‚æœåªæƒ³æœ—è¯»æŸä¸€æ®µï¼Œå¯ä»¥åœ¨ç½‘é¡µä¸Šå…ˆé€‰ä¸­é‚£æ®µæ–‡å­—ã€‚*
